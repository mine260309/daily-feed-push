<!DOCTYPE html>
<html>
<head>
<script>
window.addEventListener("load", function () {
  // We need to access the form element
  var form = document.getElementById("email-form");

  // to takeover its submit event.
  form.addEventListener("submit", function (event) {
    event.preventDefault();
    subscribe();
  });
  
  var xmlhttp;
  function sendXHR(url, data, func)
  {
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange=func;
    xmlhttp.open("POST", url);
    xmlhttp.send(data);
  }

  function subscribe()
  {
    // We bind the FormData object and the form element
    var formData  = new FormData(form);

    sendXHR("api/1/subscribe", formData, function() {
      if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        document.getElementById("result").innerHTML=xmlhttp.responseText;
      }
      else {
        document.getElementById("result").innerHTML="Something went wrong:<br>"
        document.getElementById("result").innerHTML+=xmlhttp.responseText;
      }
    });
  }
});

</script>
</head>
<body>

<div id="content"><h2>Subscribe daily-feed-push with your email</h2></div>
<form id="email-form">
  <label for="myName">Email: </label>
  <input id="email" type="text" name="mail">
  <input type="submit" value="Subscribe"/>
</form>
<div id="result"></div>
</body>
</html>

